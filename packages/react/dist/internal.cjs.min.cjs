"use strict";var e=require("react");require("generaltranslation");var r=require("react/jsx-runtime");const t=e=>`Duplicate key found in dictionary: "${e}"`;function n(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t}"function"==typeof SuppressedError&&SuppressedError;var a="en",i=["singular","plural","dual","zero","one","two","few","many","other"];var o=new(function(){function e(){this.cache=new Map}return e.prototype._generateKey=function(e,r,t){void 0===t&&(t={});var n=Array.isArray(r)?r.join(","):r,a=t?JSON.stringify(t,Object.keys(t).sort()):"{}";return"".concat(e,":").concat(n,":").concat(a)},e.prototype.get=function(e,r,t){void 0===t&&(t={});var n=this._generateKey(e,r,t);if(!this.cache.has(n)){var a=new Intl[e](r,t);this.cache.set(n,a)}return this.cache.get(n)},e}());const l={variable:"value",number:"n",datetime:"date",currency:"cost"};function s(e={},r){var t;if(e.name)return e.name;return`_gt_${l[r]||"value"}_${null===(t=e["data-_gt"])||void 0===t?void 0:t.id}`}const c=e=>{var r;if(!e)return"";const{type:t,props:n}=e;if(t&&"function"==typeof t){if("displayName"in t&&"string"==typeof t.displayName&&t.displayName)return t.displayName;if("name"in t&&"string"==typeof t.name&&t.name)return t.name}return t&&"string"==typeof t?t:n.href?"a":(null===(r=n["data-_gt"])||void 0===r?void 0:r.id)?`C${n["data-_gt"].id}`:"function"},u=r=>{return t=r,e.isValidElement(t)?(e=>{const{type:r,props:t}=e;let n={type:c(e),props:{}};if(t["data-_gt"]){const e=t["data-_gt"];let r=Object.assign({},e);const a=e.transformation;if("variable"===a){const r=e.variableType||"variable";return{variable:r,key:s(t,r),id:e.id}}if("plural"===a&&e.branches){n.type="Plural";let t={};Object.entries(e.branches).forEach((([e,r])=>{t[e]=d(r)})),r=Object.assign(Object.assign({},r),{branches:t})}if("branch"===a&&e.branches){n.type="Branch";let t={};Object.entries(e.branches).forEach((([e,r])=>{t[e]=d(r)})),r=Object.assign(Object.assign({},r),{branches:t})}n.props["data-_gt"]=r}return t.children&&(n.props.children=d(t.children)),n})(r):"number"==typeof r?r.toString():r;var t};function d(e){return Array.isArray(e)?e.map(u):u(e)}function p(e,r,t){let n="",a=null;return"number"==typeof e&&!a&&t&&(n=function(e,r,t){void 0===r&&(r=i),void 0===t&&(t=["en"]);var n=o.get("PluralRules",t).select(e),a=Math.abs(e);if(0===a&&r.includes("zero"))return"zero";if(1===a){if(r.includes("singular"))return"singular";if(r.includes("one"))return"one"}if("one"===n&&r.includes("singular"))return"singular";if(2===a){if(r.includes("dual"))return"dual";if(r.includes("two"))return"two"}return"two"===n&&r.includes("dual")?"dual":r.includes(n)?n:"two"===n&&r.includes("dual")?"dual":"two"===n&&r.includes("plural")?"plural":"two"===n&&r.includes("other")?"other":"few"===n&&r.includes("plural")?"plural":"few"===n&&r.includes("other")?"other":"many"===n&&r.includes("plural")?"plural":"many"===n&&r.includes("other")?"other":"other"===n&&r.includes("plural")?"plural":""}(e,Object.keys(t),r)),n&&!a&&(a=t[n]),a}function f(e){var r;const t=(null===(r=e["data-_gt"])||void 0===r?void 0:r.variableType)||"variable";return{variableName:s(e,t),variableType:t,variableValue:void 0!==e.value?e.value:void 0!==e["data-_gt-unformatted-value"]?e["data-_gt-unformatted-value"]:void 0!==e.children?e.children:void 0,variableOptions:(()=>{const r=Object.assign(Object.assign({},e.currency&&{currency:e.currency}),e.options&&Object.assign({},e.options));return Object.keys(r).length?r:"string"==typeof e["data-_gt-variable-options"]?JSON.parse(e["data-_gt-variable-options"]):e["data-_gt-variable-options"]||void 0})()}}function b(e){const r=e;if(r&&"object"==typeof r&&"string"==typeof r.key){const e=Object.keys(r);if(1===e.length)return!0;if(2===e.length){if("number"==typeof r.id)return!0;if("string"==typeof r.variable)return!0}if(3===e.length&&"string"==typeof r.variable&&"number"==typeof r.id)return!0}return!1}function h(e){return e&&e.props&&e.props["data-_gt"]?e.props["data-_gt"]:null}function y({children:r,defaultLocale:t=a,renderVariable:i}){const o=r=>e.isValidElement(r)?(r=>{const a=h(r);if("variable"===(null==a?void 0:a.transformation)){const{variableType:e,variableValue:n,variableOptions:a}=f(r.props);return i({variableType:e,variableValue:n,variableOptions:a,locales:[t]})}if("plural"===(null==a?void 0:a.transformation)){const e=a.branches||{};return l(p(r.props.n,[t],e)||r.props.children)}if("branch"===(null==a?void 0:a.transformation)){let e=r.props,{children:t,name:i,branch:o,"data-_gt":s}=e,c=n(e,["children","name","branch","data-_gt"]);return i=i||r.props["data-_gt-name"]||"branch",c=a.branches||{},l(void 0!==c[o]?c[o]:t)}return"fragment"===(null==a?void 0:a.transformation)?e.createElement(r.type,{key:r.props.key,children:l(r.props.children)}):r.props.children?e.cloneElement(r,Object.assign(Object.assign({},r.props),{"data-_gt":void 0,children:l(r.props.children)})):e.cloneElement(r,Object.assign(Object.assign({},r.props),{"data-_gt":void 0}))})(r):r,l=r=>Array.isArray(r)?e.Children.map(r,o):o(r);return l(r)}function v({sourceElement:r,targetElement:t,locales:n=[a],renderVariable:i}){var o,l;const{props:s}=r,c=s["data-_gt"],u=null==c?void 0:c.transformation;if("plural"===u){const e=r.props.n;return g({source:p(e,n,c.branches||{})||r.props.children,target:p(e,n,t.props["data-_gt"].branches||{})||t.props.children,locales:n,renderVariable:i})}if("branch"===u){let{name:e,branch:a,children:o}=s;e=e||r.props["data-_gt-name"]||"branch";return g({source:(c.branches||{})[a]||o,target:(t.props["data-_gt"].branches||{})[a]||t.props.children,locales:n,renderVariable:i})}return"fragment"===u&&(null===(o=t.props)||void 0===o?void 0:o.children)?e.createElement(r.type,{key:r.props.key,children:g({source:s.children,target:t.props.children,locales:n,renderVariable:i})}):(null==s?void 0:s.children)&&(null===(l=t.props)||void 0===l?void 0:l.children)?e.cloneElement(r,Object.assign(Object.assign({},s),{"data-_gt":void 0,children:g({source:s.children,target:t.props.children,locales:n,renderVariable:i})})):y({children:r,defaultLocale:n[0],renderVariable:i})}function g({source:t,target:n,locales:i=[a],renderVariable:o}){if(null==n&&t)return y({children:t,defaultLocale:i[0],renderVariable:o});if("string"==typeof n)return n;if(Array.isArray(n)&&!Array.isArray(t)&&t&&(t=[t]),Array.isArray(t)&&Array.isArray(n)){const a={},l={},s=t.filter((r=>{if(e.isValidElement(r)){const e=h(r);if("variable"!==(null==e?void 0:e.transformation))return!0;{let{variableName:e,variableValue:t,variableOptions:n}=f(r.props);a[e]=t,l[e]=n}}})),c=e=>s.find((r=>{var t,n;const a=h(r);if(void 0!==(null==a?void 0:a.id)){return a.id===(null===(n=null===(t=null==e?void 0:e.props)||void 0===t?void 0:t["data-_gt"])||void 0===n?void 0:n.id)}return!1}))||s.shift();return n.map(((t,n)=>{if("string"==typeof t)return r.jsx(e.Fragment,{children:t},`string_${n}`);if(b(t))return r.jsx(e.Fragment,{children:o({variableType:t.variable||"variable",variableValue:a[t.key],variableOptions:l[t.key],locales:i})},`var_${n}`);const s=c(t);return s?r.jsx(e.Fragment,{children:v({sourceElement:s,targetElement:t,locales:i,renderVariable:o})},`element_${n}`):void 0}))}if(n&&"object"==typeof n&&!Array.isArray(n)){const r=b(n)?"variable":"element";if(e.isValidElement(t)){if("element"===r)return v({sourceElement:t,targetElement:n,locales:i,renderVariable:o});const e=h(t);if("variable"===(null==e?void 0:e.transformation)){const{variableValue:e,variableOptions:r,variableType:n}=f(t.props);return o({variableType:n,variableValue:e,variableOptions:r,locales:i})}}}return y({children:t,defaultLocale:i[0],renderVariable:o})}const m={method:"default",timeout:"undefined"!=typeof process&&"development"!==process.env.NODE_ENV?8e3:12e3};class O extends Error{constructor(e,r){super(e),this.error=e,this.code=r,this.code=r}toTranslationError(){return{state:"error",error:this.error,code:this.code}}}exports.GTTranslationError=O,exports.addGTIdentifier=function r(t,a=0){let o=a;const l=e=>{const{type:t,props:a}=e;o+=1;let l,s={id:o};try{l="function"==typeof t&&t.gtTransformation||""}catch(e){l=""}if(l){const t=l.split("-");if("translate"===t[0])throw new Error((e=>{var r;return`General Translation: Nested <T> components. The inner <T> has the id: "${null===(r=null==e?void 0:e.props)||void 0===r?void 0:r.id}".`})(e));if("variable"===t[0]&&(s.variableType=(null==t?void 0:t[1])||"variable"),"plural"===t[0]){const e=Object.entries(a).reduce(((e,[t,n])=>{var a;return a=t,i.includes(a)&&(e[t]=r(n,o)),e}),{});Object.keys(e).length&&(s.branches=e)}if("branch"===t[0]){const{children:e,branch:t}=a,i=n(a,["children","branch"]),l=Object.entries(i).reduce(((e,[t,n])=>(e[t]=r(n,o),e)),{});Object.keys(l).length&&(s.branches=l)}s.transformation=t[0]}return s};function s(r){return e.isValidElement(r)?function(r){const{props:t}=r;if(t["data-_gt"])throw new Error((e=>`General Translation already in use on child with props: ${e.props}. This usually occurs when you nest <T> components within the same file. Remove one of the <T> components to continue.`)(r));let n=l(r),a=Object.assign(Object.assign({},t),{"data-_gt":n});return t.children&&!n.variableType&&(a.children=c(t.children)),r.type===e.Fragment&&(a["data-_gt"].transformation="fragment"),e.cloneElement(r,a)}(r):r}function c(r){return Array.isArray(r)?e.Children.map(r,s):s(r)}return c(t)},exports.defaultRenderSettings=m,exports.flattenDictionary=function e(r,n=""){const a={};for(const i in r)if(r.hasOwnProperty(i)){const o=n?`${n}.${i}`:i;if("object"!=typeof r[i]||null===r[i]||Array.isArray(r[i])){if(a.hasOwnProperty(o))throw new Error(t(o));a[o]=r[i]}else{const n=e(r[i],o);for(const e in n){if(a.hasOwnProperty(e))throw new Error(t(e));a[e]=n[e]}}}return a},exports.getDictionaryEntry=function(r,t){let n=r,a=t.split(".");for(const r of a){if("object"!=typeof n||Array.isArray(n)||e.isValidElement(n))return;n=n[r]}return n},exports.getEntryAndMetadata=function(e){if(Array.isArray(e)){if(1===e.length)return{entry:e[0]};if(2===e.length)return{entry:e[0],metadata:e[1]}}return{entry:e}},exports.getPluralBranch=p,exports.getVariableName=s,exports.getVariableProps=f,exports.isValidDictionaryEntry=function(e){if("string"==typeof e)return!0;if(Array.isArray(e)){if("string"!=typeof(null==e?void 0:e[0]))return!1;const r=null==e?void 0:e[1];if(void 0===r)return!0;if(r&&"object"==typeof r)return!0}return!1},exports.isVariableObject=b,exports.renderDefaultChildren=y,exports.renderSkeleton=function(){return""},exports.renderTranslatedChildren=g,exports.writeChildrenAsObjects=d;
